# üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**–í–µ—Ä—Å–∏—è:** 2025-08-05 **–°—Ç–∞—Ç—É—Å:** ‚úÖ Canonical

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ NEIRA Super App.

---

## 1. –§–∏–ª–æ—Å–æ—Ñ–∏—è

- **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ú–∞–∂–æ—Ä–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ —Ä–µ–≤—å—é.
- **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã.
- **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:** –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª—è—é—Ç—Å—è.
- **–§–∏–∫—Å–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—Ä—Å–∏–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.

---

## 2. –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** `yarn install`
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ:** `yarn workspace @neira/shell add <package>`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö:** `yarn depcheck`
- **–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:** `yarn audit`

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ CI –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∫—Ä–∏–ø—Ç—ã `lint:deps` –∏ `deps:check`.

---

## 3. –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 3.1 –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (DEPENDENCIES:MAINTENANCE_PROCESS)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
**–†–µ—à–µ–Ω–∏–µ:** –í–Ω–µ–¥—Ä–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `yarn depcheck` –≤ CI –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Renovate.
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `package.json` –æ—á–∏—â–µ–Ω—ã, –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω.

### 3.2 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ESM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (ESM:PBF_COMPATIBILITY)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ `ERR_REQUIRE_ESM` –∏–∑-–∑–∞ `pbf@4+` (ESM-only) –≤ CommonJS –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
**–†–µ—à–µ–Ω–∏–µ:** –í–µ—Ä—Å–∏—è `pbf` –±—ã–ª–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ `3.2.1` —á–µ—Ä–µ–∑ `resolutions` –≤ `package.json`.
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –±—É–¥—É—â–∏—Ö ESM-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

```json
// package.json
"resolutions": {
  "pbf": "^3.2.1"
}
```

---

## 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 4.1 ESM vs CommonJS

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ—à–µ–Ω–∏—è:**

1. **–§–∏–∫—Å–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é CommonJS –≤–µ—Ä—Å–∏—é
2. **–ó–∞–º–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** ‚Äî –Ω–∞–π–¥–∏—Ç–µ CommonJS –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É
3. **–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
4. **Dynamic imports** ‚Äî –¥–ª—è ESM-only –º–æ–¥—É–ª–µ–π

### 4.2 Peer Dependencies

–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã `peerDependencies` —Ä–µ—à–∞—é—Ç—Å—è –ø—É—Ç–µ–º –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö `package.json` –∫ –æ–±—â–µ–º—É –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é.

---

## 5. CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 5.1 GitHub Actions –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

Workflow `.github/workflows/dependencies.yml` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `yarn deps:check` –∏ `yarn audit` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ pull request –∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

### 5.2 Renovate –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

Renovate –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è PR –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `renovate.json`.

---

## 6. Troubleshooting

### 6.1 –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|---------|
| ESM import errors | –ö–æ–Ω—Ñ–ª–∏–∫—Ç ESM/CommonJS | –§–∏–∫—Å–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–∞ |
| Peer dependency warnings | –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–π | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ resolutions |
| Duplicate packages | –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ workspace | yarn dedupe |
| Security vulnerabilities | –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | yarn audit fix |

### 6.2 –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ê–Ω–∞–ª–∏–∑ –¥–µ—Ä–µ–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn why package-name

# –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
yarn list --pattern "package-name"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
yarn check

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
yarn cache clean

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ lock —Ñ–∞–π–ª–∞
rm yarn.lock && yarn install
```

---

## 7. –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 7.1 –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- **–û—Ü–µ–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ –ª–∏ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –Ω–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏?
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä** ‚Äî –≤–ª–∏—è–Ω–∏–µ –Ω–∞ bundle size
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –µ—Å—Ç—å –ª–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏?
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É** ‚Äî –∞–∫—Ç–∏–≤–Ω–æ –ª–∏ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç?
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é** ‚Äî —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ –ª–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º?

### 7.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```typescript
// –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const bundleAnalyzer = require('webpack-bundle-analyzer')

async function analyzeDependencies() {
  const report = await bundleAnalyzer.analyzeBundle('./dist/bundle.js')
  
  // –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—ã–µ —Ç—è–∂–µ–ª—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  const heavyDependencies = report.modules
    .filter(module => module.size > 100000) // > 100KB
    .sort((a, b) => b.size - a.size)
  
  console.log('Heavy dependencies:', heavyDependencies)
}
```

---

## 8. Revision History

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | ID –ó–Ω–∞–Ω–∏—è |
|------|--------|-----------|-----------|
| 2025-08-05 | 1.0 | –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–∞–∫—Ç–∏–∫ –æ—á–∏—Å—Ç–∫–∏ –∏ ESM —Ä–µ—à–µ–Ω–∏–π | DEPS:CLEANUP_JANUARY_2025, FIX:ERR_REQUIRE_ESM_PBF |

---

## 9. –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [Repository Management](/05-contributing/06-repository-management) ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
- [Code Quality Standards](/05-contributing/05-code-quality-standards) ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- [Development Checklist](/05-contributing/02-development-checklist) ‚Äî –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
