# üîí Build Automation & Security

## –û–±–∑–æ—Ä

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ NEIRA Super App (–∏—é–Ω—å 2025).

## üîí –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è IPC –∫–∞–Ω–∞–ª–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞

–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `allowedChannels` —Å–æ–∑–¥–∞–≤–∞–ª–æ —Ä–∏—Å–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å TypeScript —Ç–∏–ø–∞–º–∏.

### –†–µ—à–µ–Ω–∏–µ

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** –∏–∑ TypeScript —Ç–∏–ø–æ–≤:

```typescript
// packages/shell/electron.vite.config.ts
const generateAllowedChannelsPlugin = () => (\{
  name: 'generate-allowed-channels',
  buildStart() \{
    // Regex –ø–∞—Ä—Å–∏–Ω–≥ IPCChannels –∏–∑ shared-types
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è allowed-channels.json —Å 81 –∫–∞–Ω–∞–ª–æ–º
  },
})
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 100% —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, 81 –∫–∞–Ω–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## ‚ö° –°–æ–±—ã—Ç–∏–π–Ω—ã–π MCP Auto-Connect

### –ü—Ä–æ–±–ª–µ–º–∞

–ú–∞–≥–∏—á–µ—Å–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ `setTimeout(3000)` –¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤.

### –†–µ—à–µ–Ω–∏–µ

**–°–æ–±—ã—Ç–∏–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:

```typescript
// AppShell.tsx - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è
useEffect(() => \{
  window.electronAPI?.sendToMain('ui-ready')
}, [])

// IPCManager.ts - –æ–±—Ä–∞–±–æ—Ç–∫–∞
ipcMain.on('ui-ready', () => \{
  this.apiManager.autoConnectMCPServers()
})
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 95% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (–º–µ–Ω–µ–µ 100ms –≤–º–µ—Å—Ç–æ 3+ —Å–µ–∫).

## üõ†Ô∏è Build –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –£–ª—É—á—à–µ–Ω–∏—è

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏**: –†–∞–∑–º–µ—Ä—ã –∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- **Security validation**: –ù–∞–ª–∏—á–∏–µ `allowed-channels.json`
- **Fail-fast**: –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

```javascript
// forge.config.js
packageAfterCopy: async (forgeConfig, buildPath, electronVersion, platform, arch) => \{
  // Comprehensive validation
  validatePaths(buildPath)
  validateDependencies(buildPath)
  validateSecurity(buildPath)
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### üîÑ Build-time –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```
TypeScript —Ç–∏–ø—ã ‚Üí Regex –ø–∞—Ä—Å–∏–Ω–≥ ‚Üí JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚Üí Runtime –∑–∞–≥—Ä—É–∑–∫–∞
```

### üì° –°–æ–±—ã—Ç–∏–π–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è

```
UI –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å ‚Üí IPC —Å–æ–±—ã—Ç–∏–µ ‚Üí Main handler ‚Üí –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫
```

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è pipeline

```
–ü—É—Ç–∏ ‚Üí –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Üí –§–∞–π–ª—ã ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –û—Ç—á—ë—Ç/Fail
```

## –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç           | –î–æ             | –ü–æ—Å–ª–µ             | –£–ª—É—á—à–µ–Ω–∏–µ     |
| ------------------- | -------------- | ----------------- | ------------- |
| **IPC –∫–∞–Ω–∞–ª—ã**      | 25 —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö | 81 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö | +224%         |
| **MCP –∑–∞–ø—É—Å–∫**      | 3+ —Å–µ–∫         | –º–µ–Ω–µ–µ 100ms       | 95% –±—ã—Å—Ç—Ä–µ–µ   |
| **Build –≤–∞–ª–∏–¥–∞—Ü–∏—è** | –ë–∞–∑–æ–≤–∞—è        | Comprehensive     | 100% –ø–æ–∫—Ä—ã—Ç–∏–µ |

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **IPC Security**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ IPC –∫–∞–Ω–∞–ª—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- **Web Security**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `webSecurity: true` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö `webPreferences` –¥–ª—è –≤—Å–µ—Ö `BrowserWindow` –∏ `WebContentsView` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS-–∞—Ç–∞–∫.
- **State Isolation**: –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ IPC-–∫–∞–Ω–∞–ª—ã, –∞ –Ω–µ —á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã.
- **API Protection**: –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö API –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ preload-—Å–∫—Ä–∏–ø—Ç–∞—Ö. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Ç–æ–¥—ã.
- **Build-time Validation**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑ —Ç–∏–ø–æ–≤ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∏—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏.
- **Fail-fast**: –ü—Ä–µ—Ä—ã–≤–∞–π—Ç–µ —Å–±–æ—Ä–∫—É –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ª—é–±—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –°–æ–±—ã—Ç–∏–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–º–µ—Å—Ç–æ —Ç–∞–π–º–µ—Ä–æ–≤
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ UI
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üõ†Ô∏è Maintainability

- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (TypeScript —Ç–∏–ø—ã)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏

---

_–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏._
