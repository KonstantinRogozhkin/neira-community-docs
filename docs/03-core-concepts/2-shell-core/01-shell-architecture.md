# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Shell

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

- **–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ
- **–í–µ—Ä—Å–∏—è:** 1.0.0
- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-07-01
- **–ê–≤—Ç–æ—Ä—ã:** DocBuilder AI Assistant

## üìù –û–±–∑–æ—Ä

`shell` ‚Äî —ç—Ç–æ —è–¥—Ä–æ NEIRA Super App, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ Electron. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞–º–∏, –≤–∫–ª–∞–¥–∫–∞–º–∏, –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º (IPC) –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ `shell`.

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ú–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

–í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ `shell` –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ –º–æ–¥—É–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ **–ú–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏**. –ö–∞–∂–¥—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –ø–æ–¥—Å–∏—Å—Ç–µ–º—É.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

- ‚úÖ **WindowManager –∏ TabManager**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞–º–∏ –∏ –≤–∫–ª–∞–¥–∫–∞–º–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ **ShellTabsProvider –∏ NavigationManager**: –ù–∞–≤–∏–≥–∞—Ü–∏—è (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ **MCPManager –∏ APIManager**: API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ **Electron Chrome Extensions**: –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ **IPCManager**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ IPC-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

- ‚ö†Ô∏è **PlannerService**: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è **Voice Input Pipeline**: –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-07-01 –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç—á–µ—Ç–∞ –æ–± –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç    | –î–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
| ------------ | ------------- | ---------------- | --------- |
| Cold Start   | 2.5s          | 0.3s             | **88%**   |
| Memory Usage | 420MB         | 300MB            | **29%**   |
| CPU Load     | 35%           | 22%              | **37%**   |

### BaseManager –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

–í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `BaseManager`, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è.

```typescript
// packages/shell/src/main/managers/BaseManager.ts
export abstract class BaseManager {
  protected logger: AppLogger

  constructor(logger: AppLogger) {
    this.logger = logger
  }

  // –ú–µ—Ç–æ–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
  abstract _initialize(): Promise<void> | void

  // –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
  abstract _destroy(): Promise<void> | void
}
```

### ‚ú® –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

–ö–ª—é—á–µ–≤—ã–º –∞—Å–ø–µ–∫—Ç–æ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ `shell` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `setInterval`. –¢–∞–π–º–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª—Å—è, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–µ –æ—á–∏—â–∞–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
–í—Å–µ —Ä–µ—Å—É—Ä—Å—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è (—Ç–∞–π–º–µ—Ä—ã, –ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –≤–æ—Ä–∫–µ—Ä—ã), –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ `_initialize()` –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω—ã –≤ `_destroy()`.

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Ç–µ—á–∫–∏ —Å `setInterval`

```typescript
// packages/electron-chrome-web-store/src/browser/updater.ts

// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏
let globalUpdateIntervalId: NodeJS.Timeout | null = null
function initUpdater() {
  globalUpdateIntervalId = setInterval(() => {
    /* ... */
  }, 3600 * 1000)
}

// –ü–†–ê–í–ò–õ–¨–ù–û: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–º –≤–Ω—É—Ç—Ä–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
class ExtensionsManager extends BaseManager {
  private updateInterval: NodeJS.Timeout | null = null

  async _initialize() {
    // ... –¥—Ä—É–≥–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    this.updateInterval = setInterval(() => {
      this.checkForUpdates()
    }, 3600 * 1000)
  }

  async _destroy() {
    if (this.updateInterval) {
      clearInterval(this.updateInterval)
      this.updateInterval = null
    }
    // ... –¥—Ä—É–≥–∞—è –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏
  }

  private checkForUpdates() {
    // ...
  }
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ —Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±—É–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã.
