graph TD
    %% –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∏–ª–∏
    classDef repo_private fill:#F8D7DA,stroke:#DC3545,stroke-width:4px,color:#000;
    classDef repo_public fill:#D1E7DD,stroke:#198754,stroke-width:2px,color:#000;
    classDef package_private fill:#F5C6CB,stroke:#842029,stroke-width:2px,color:#000;
    classDef build_tool fill:#FFF3CD,stroke:#FFC107,stroke-width:2px,color:#000;
    classDef product fill:#CFF4FC,stroke:#0D6EFD,stroke-width:2px,color:#000;
    classDef user fill:#E9D5FF,stroke:#9B59B6,stroke-width:2px,color:#000;

    %% –ë–ª–æ–∫ 1: –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    subgraph neira_enterprise ["<b>neira-enterprise</b> (Private Repo)"]
        direction LR
        
        %% –ü–æ–¥-–±–ª–æ–∫: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        subgraph "Workspace Tools"
            ROOT_PKG["<b>package.json</b><br/>(yarn workspaces, scripts)"]:::build_tool
            GIT_MODULES[".gitmodules"]:::build_tool
        end

        %% –ü–æ–¥-–±–ª–æ–∫: –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
        subgraph "packages/ (Private Code)"
            PKG_NEIRA_APP["<b>neira-app</b><br/>(UI –¥–ª—è Business Suite)"]:::package_private
            PKG_SERM["<b>app-serm-manager</b><br/>(–ü—Ä–∏–º–µ—Ä –±–∏–∑–Ω–µ—Å-–∞–≥–µ–Ω—Ç–∞)"]:::package_private
            PKG_CONNECTOR["<b>neira-cloud-connector</b><br/>(–°–≤—è–∑—å —Å –æ–±–ª–∞–∫–æ–º)"]:::package_private
        end

        %% –ü–æ–¥-–±–ª–æ–∫: –ü—É–±–ª–∏—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
        subgraph "platform/ (Public Code)"
            PLATFORM["<b>neira-core</b><br/>(Git Submodule)"]:::repo_public
        end

    end
    classDef neira_enterprise_subgraph fill:transparent,stroke:#DC3545,stroke-width:2px;
    class neira_enterprise neira_enterprise_subgraph;


    %% –ë–ª–æ–∫ 2: –í–Ω–µ—à–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
    subgraph "External Entities"
        DEV[üßë‚Äçüíª –í–∞—à–∞ –ö–æ–º–∞–Ω–¥–∞]:::user
        PRODUCT["<b>NEIRA Business Suite</b><br/>(–ö–æ–Ω–µ—á–Ω—ã–π .dmg/.exe)"]:::product
        GITHUB_CORE["GitHub: neira-core"]:::repo_public
    end

    %% –°–≤—è–∑–∏ –∏ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

    %% 1. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    DEV -- "–ö–ª–æ–Ω–∏—Ä—É–µ—Ç<br/>(--recurse-submodules)" --> neira-enterprise;
    DEV -- "–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥<br/>–ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏" --> PKG_NEIRA_APP;
    DEV -- "–ó–∞–ø—É—Å–∫–∞–µ—Ç 'yarn dev:business'" --> ROOT_PKG;

    %% 2. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    GIT_MODULES -- "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞" --> GITHUB_CORE;
    GITHUB_CORE -- "–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤" --> PLATFORM;
    ROOT_PKG -- "–û–±—ä–µ–¥–∏–Ω—è–µ—Ç workspaces" --> PLATFORM;
    ROOT_PKG -- "–û–±—ä–µ–¥–∏–Ω—è–µ—Ç workspaces" --> PKG_NEIRA_APP;
    PKG_NEIRA_APP -- "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç" --> PKG_CONNECTOR;
    PKG_CONNECTOR -- "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥—Ä–æ –∏–∑" --> PLATFORM;
    
    %% 3. –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏
    ROOT_PKG -- "–°–∫—Ä–∏–ø—Ç 'build:business'<br/>—Å–æ–±–∏—Ä–∞–µ—Ç" --> PRODUCT;
    PLATFORM -- "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫<br/>–æ—Å–Ω–æ–≤–∞ –¥–ª—è" --> PRODUCT;
    PKG_NEIRA_APP & PKG_SERM -- "–í–∫–ª—é—á–∞—é—Ç—Å—è –≤" --> PRODUCT;
    
    %% 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    DEV -- "–ó–∞–ø—É—Å–∫–∞–µ—Ç 'git submodule update'" --> GIT_MODULES;