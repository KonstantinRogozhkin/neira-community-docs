# Стратегия Логирования в NEIRA Super App

## 1. Философия

Логирование — критически важный компонент для отладки и мониторинга приложения. Наша стратегия направлена на **унификацию, консистентность и информативность** логов. Все части системы, от `shell` до `neira-app`, должны следовать единым правилам.

## 2. Централизованный пакет: `@neira/logger`

- **Единый источник правды:** Вся логика логирования инкапсулирована в пакете `packages/@neira/logger`.
- **Никаких `console.log`:** Прямое использование `console.log` и его аналогов в коде приложения **запрещено**. Вместо этого всегда должен использоваться экземпляр логгера.

## 3. Принципы использования

### 3.1. Единый экспорт и формат

Ранее в кодовой базе существовали дублирующиеся экспорты (`Logger`, `AppLogger`). Эта проблема была решена. Теперь используется **единый, унифицированный логгер** из пакета `@neira/logger`.

### 3.2. Внедрение зависимостей (Dependency Injection)

Компоненты не должны создавать собственные экземпляры логгера. Вместо этого они должны получать его через конструктор или как `prop`.

**Пример в `BaseManager` (`shell`):**

```typescript
// ❌ Плохо: Менеджер сам создает логгер
export abstract class BaseManager {
  protected logger = new Logger({ prefix: this.name });
  // ...
}

// ✅ Хорошо: Логгер внедряется извне
export abstract class BaseManager {
  protected logger: Logger;

  constructor(logger: Logger) {
    this.logger = logger.child({ prefix: this.name });
  }
  // ...
}
```

Это гарантирует, что все дочерние логгеры наследуют общую конфигурацию и контекст.

## 4. Уровни логирования

Используйте уровни логирования семантически:

- `error`: Для реальных ошибок, которые требуют внимания (например, неудачный IPC-вызов, крэш воркера).
- `warn`: Для потенциальных проблем, которые не являются критическими (например, использование устаревшего API).
- `info`: Для ключевых событий жизненного цикла (старт/стоп менеджера, успешная конфигурация).
- `debug`: Для детальной отладочной информации, которая не нужна в `production` сборке.

## 5. Чистота исходного кода

- **Никаких артефактов сборки:** Файлы типа `.js` или `.d.ts` не должны попадать в систему контроля версий внутри директорий `src`.
