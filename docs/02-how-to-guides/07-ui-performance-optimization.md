# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ UI

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–µ–π—Å—Ç–≤—É—é—â–∏–π –≥–∞–π–¥**  
**–ü—Ä–∏–º–µ–Ω–∏–º–æ –∫:** AppShell, Layout Stability, Performance

**–°–≤—è–∑–∏:** [–î–∏–∑–∞–π–Ω –∏ —Ç–µ–º–∏–∑–∞—Ü–∏—è](/core-concepts/ui-layer/design-theming)

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ Layout Shift (CLS)

Layout Shift –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –º–µ–Ω—è—é—â–∏—Ö —Ä–∞—Å–∫–ª–∞–¥–∫—É.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSS Grid –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Å—Ç–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`isShell`) —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –±–µ–∑ `useState` –∏–ª–∏ `useEffect`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.

```tsx
// ‚úÖ globals.css: –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞, —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—â–∞—è –º–µ—Å—Ç–æ
.app-shell-grid \{
  display: grid;
  grid-template-rows: auto 1fr; /* –†—è–¥ –¥–ª—è —Ö–µ–¥–µ—Ä–∞, 1fr –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
}

// ‚úÖ useEnvironment.ts: –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
export function useEnvironment() \{
  const isShell = typeof window !== 'undefined' && window.location.protocol === 'neira:';
  // ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ useState/useEffect - —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –¥–≤–æ–π–Ω–æ–π —Ä–µ–Ω–¥–µ—Ä
  return \{ isShell };
}
```

### 2. –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ë–æ–ª—å—à–∏–µ "–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (&gt;200 —Å—Ç—Ä–æ–∫) –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –∏–∑–±—ã—Ç–æ—á–Ω—ã–º —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞–º.

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –µ–¥–∏–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Single Responsibility Principle).

```tsx
// üëé –ü–ª–æ—Ö–æ: AppShell (400+ —Å—Ç—Ä–æ–∫) –¥–µ–ª–∞–µ—Ç –≤—Å—ë
function AppShell(\{ children }) \{
  const [isOpen, setIsOpen] = useState(false); // ...–∏ –¥—Ä—É–≥–∞—è –ª–æ–≥–∏–∫–∞
  return (/* ...—Å–ª–æ–∂–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Å —Å–∞–π–¥–±–∞—Ä–æ–º, —Ç—É–ª–±–∞—Ä–æ–º –∏ —Ç.–¥. */);
}

// üëç –•–æ—Ä–æ—à–æ: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
function AppShell(\{ children }) \{
  return (
    <div className="app-shell-grid">
      `<BrowserToolbar />`
      `<SidebarLayout />` 
      <main>{children}</main>
    </div>
  );
}
```

### 3. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤

–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ—Ç–µ–Ω —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Ç–æ–≤) –±–ª–æ–∫–∏—Ä—É–µ—Ç UI.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `react-window` –∏–ª–∏ `react-virtualized` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –±–æ–ª–µ–µ 50 —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

```tsx
import \{ FixedSizeList } from 'react-window';

// ‚úÖ –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
export function ChatList(\{ chats }) \{
  if (chats.length < 50) \{
    return chats.map(chat => `<ChatItem key={chat.id} chat={chat} />`);
  }
  return (
    `<FixedSizeList height={400} itemCount={chats.length} itemSize={60}>`
      {VirtualizedChatItem}
    </FixedSizeList>
  );
}
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∏ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **CLS (Layout Shift):** `< 0.1`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSS Grid, –∏–∑–±–µ–≥–∞–π—Ç–µ `padding-top` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- **First Render:** `< 100ms`.
- **Component Render Time:** `< 16ms` (–¥–ª—è 60fps). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ React.memo –∏ `useCallback`.
- **–†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `< 200 —Å—Ç—Ä–æ–∫`.
- **Bundle Size:** `< 500KB` (gzipped). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É (`next/dynamic`).
- **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ `> 50` —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- **–ü–æ—Ä—è–¥–æ–∫ —Ö—É–∫–æ–≤:** –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Ö—É–∫–∏ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ, –¥–æ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏–π –∏–ª–∏ `return`.

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **React DevTools Profiler:** `yarn dev:profile` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–Ω–¥–µ—Ä–∞ –∏ –ø—Ä–∏—á–∏–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
- **Lighthouse:** `npx lighthouse http://localhost:3000` –¥–ª—è –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- **Web Vitals:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `web-vitals` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è CLS –∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
