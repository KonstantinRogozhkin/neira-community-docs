# Thinking Indicator (Индикатор обработки)

## Описание

Индикатор "thinking" показывается пользователю после отправки сообщения в чат, когда AI обрабатывает запрос.

## Компоненты

### ThinkingIndicator

Основной компонент индикатора обработки запроса.

**Расположение**: `features/chat/components/ThinkingIndicator.tsx`

**Функциональность**:

- Анимированные точки с градиентным эффектом
- Иконка бота с эффектом искры
- Текст "обрабатываю запрос..." с пульсацией
- Использует кастомные CSS анимации

### Messages (обновлен)

Компонент для отображения списка сообщений с поддержкой индикатора thinking.

**Изменения**:

- Добавлена логика показа ThinkingIndicator
- Индикатор показывается при статусах:
  - `"submitted"` - сообщение отправлено, ответ не начался
  - `"streaming"` - если последнее сообщение от пользователя (AI еще не начал отвечать)

## CSS Анимации

### Кастомные анимации в globals.css

```css
/* Пульсация с изменением размера */
@keyframes thinking-pulse \{
  0%,
  100% \{
    opacity: 0.4;
    transform: scale(1);
  }
  50% \{
    opacity: 1;
    transform: scale(1.1);
  }
}

/* Волновая анимация точек */
@keyframes thinking-wave \{
  0%,
  60%,
  100% \{
    transform: translateY(0);
  }
  30% \{
    transform: translateY(-8px);
  }
}

/* Градиентный эффект */
@keyframes gradient-shift \{
  0% \{
    background-position: 0% 50%;
  }
  50% \{
    background-position: 100% 50%;
  }
  100% \{
    background-position: 0% 50%;
  }
}
```

### Применяемые классы

- `.thinking-pulse` - пульсация
- `.thinking-wave` - волновая анимация
- `.thinking-gradient` - градиентный фон с анимацией

## Логика показа

Индикатор показывается когда:

1. **Статус "submitted"** - пользователь отправил сообщение, но ответ еще не начал поступать
2. **Статус "streaming" + последнее сообщение от пользователя** - начинается обработка, но AI еще не начал генерировать ответ

## Стилизация

- **Цвета**: Градиент от синего к фиолетовому и розовому
- **Размеры**: 2.5x2.5 точки, иконка 4x4
- **Анимации**: Плавные переходы с задержками
- **Позиционирование**: Соответствует стилю сообщений

## Интеграция

Компонент автоматически интегрируется в поток сообщений через:

1. Импорт в `Messages.tsx`
2. Условный рендеринг на основе статуса чата
3. Автопрокрутка к индикатору

## Примеры использования

```tsx
// Базовое использование
`<ThinkingIndicator />`

// С кастомными стилями
`<ThinkingIndicator className="my-custom-styles" />`
```

## Технические детали

- **Фреймворк**: React с TypeScript
- **Стили**: Tailwind CSS + кастомные CSS анимации
- **Зависимости**: lucide-react для иконок
- **Производительность**: Использует CSS анимации для оптимизации
