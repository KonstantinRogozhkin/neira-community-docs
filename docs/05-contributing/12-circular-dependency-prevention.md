# üîÑ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–µ–π—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-07-01

## üéØ –¶–µ–ª—å

–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç: –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è IPC

**–î–∞—Ç–∞:** 1 –∏—é–ª—è 2025  
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `safeInvoke()` –∏–∑-–∑–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤

1. `safeInvoke('system:log', ...)` ‚Üí `logger.info(...)`
2. `logger` ‚Üí `systemLogClient` ‚Üí `safeInvoke('system:log', ...)`
3. **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª!** üîÑ

### –†–µ—à–µ–Ω–∏–µ

```typescript
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏
export async function safeInvoke(channel: string, ...args: any[]): Promise<any> {
  // –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏: –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º system:log –≤—ã–∑–æ–≤—ã
  if (channel !== 'system:log') {
    logger.info(`[IPC] üöÄ safeInvoke called: ${channel}`, args)
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

## üõ°Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è

### 1. –ü—Ä–∏–Ω—Ü–∏–ø "–õ–æ–≥–≥–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏–π"

**–ü—Ä–∞–≤–∏–ª–æ:** –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (IPC, —É—Ç–∏–ª–∏—Ç—ã) –ù–ï –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–≥–µ—Ä

- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `safeInvoke()`, `base.ts`, —É—Ç–∏–ª–∏—Ç–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏

```typescript
// –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
if (channel !== 'system:log') {
  logger.info('Safe to log here')
}
```

### 3. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
yarn check:circular-deps
```

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –°–∫—Ä–∏–ø—Ç `scripts/check-circular-deps.js`

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ
// –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### –ö–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn check:circular-deps

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD
npm run check:circular-deps
```

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

- [ ] –§—É–Ω–∫—Ü–∏—è –ù–ï —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤–æ–π —É—Ç–∏–ª–∏—Ç–æ–π?
- [ ] –õ–æ–≥–≥–µ—Ä –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é?
- [ ] –ù–µ—Ç —Ä–∏—Å–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏?

### –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:

- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `yarn check:circular-deps`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞

- **–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** ~5 –º–∏–Ω—É—Ç
- **–í—Ä–µ–º—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:** ~20 –º–∏–Ω—É—Ç
- **–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ~5 –º–∏–Ω—É—Ç
- **–û–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è:** ~30 –º–∏–Ω—É—Ç

## üí° –£—Ä–æ–∫–∏

1. **–ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≤—è—â–µ–Ω–Ω—ã** - –Ω–µ —É—Å–ª–æ–∂–Ω—è–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –±–µ–∑–æ–±–∏–¥–Ω–æ** - –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∞—Å–∞–µ—Ç** - unit-—Ç–µ—Å—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª –±—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–∞–∂–Ω–∞** - –±–µ–∑ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –æ—à–∏–±–∫–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](01-golden-principles.md)
- [–ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](02-development-checklist.md)
- [IPC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](/03-core-concepts/2-shell-core/ipc-architecture/01-ipc-overview)
