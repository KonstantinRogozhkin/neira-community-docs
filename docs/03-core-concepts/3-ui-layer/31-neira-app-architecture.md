# üåê neira-app Architecture

–í–µ—Ä—Å–∏—è: 2.0
–°—Ç–∞—Ç—É—Å: ‚úÖ **–î–µ–π—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç**

## ‚ö° –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

`neira-app` ‚Äî —ç—Ç–æ —á–∏—Å—Ç—ã–π UI-—Å–ª–æ–π –¥–ª—è NEIRA Super App. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –≤ —Ä–µ–∂–∏–º–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ (`output: 'export'`), –∫–æ—Ç–æ—Ä–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `shell` (–æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º Electron) —á–µ—Ä–µ–∑ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π IPC-–º–æ—Å—Ç.

–°–≤—è–∑—å: [–°–∏—Å—Ç–µ–º–Ω—ã–π –æ–±–∑–æ—Ä](/core-concepts/architecture-patterns/system-overview), [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ IPC](/core-concepts/shell-core/ipc-architecture)

## üèóÔ∏è –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–°–±–æ—Ä–∫–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è**

   - **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `next export`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Node.js —Å–µ—Ä–≤–µ—Ä–∞.
   - **–ó–∞–ø—Ä–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ React Server Components –∏ API Routes –∑–∞–ø—Ä–µ—â–µ–Ω–æ.
   - **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<Link>`, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∏–ª–∏ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ Super App –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ IPC-–≤—ã–∑–æ–≤ `navigationIPC.navigate()`.

2. **IPC-First –ø–æ–¥—Ö–æ–¥**

   - –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π) –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `window.neiraAPI`.
   - –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ `lib/ipc-api.ts`.
   - –ü—Ä—è–º—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ `shell` –∑–∞–ø—Ä–µ—â–µ–Ω—ã.

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (State Management)**

   - **UI State:** –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Zustand`.
   - **IPC/Server State:** –î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ IPC, –∫–µ—à–∏—Ä—É—é—Ç—Å—è –∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `React Query`.

4. **–ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Feature-Sliced Design)**

   - –ö–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º FSD —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏ `features/`, `components/`, `lib/`.
   - –§–∏—á–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä—è–º—É—é. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â–∏–µ —Ö—É–∫–∏ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã.

5. **Drizzle ORM**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∏ –º–∏–≥—Ä–∞—Ü–∏–π —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è `shell`-–ø—Ä–æ—Ü–µ—Å—Å–æ–º —á–µ—Ä–µ–∑ IPC.

## üèõÔ∏è –ü–∞—Ç—Ç–µ—Ä–Ω Root-Store (Zustand)

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** UI-–¥–∞–Ω–Ω—ã–µ ‚Äî –≤ `Zustand`, IPC-–¥–∞–Ω–Ω—ã–µ ‚Äî –≤ `React Query`.
2. **`rootStore.ts` –∫–∞–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä:** –≠—Ç–æ—Ç —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Å—Ç–æ—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ (`cross-subscribe`), –Ω–æ —Å–∞–º –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
3. **–ò–∑–æ–ª—è—Ü–∏—è —Å—Ç–æ—Ä–æ–≤:** –î–æ–º–µ–Ω–Ω—ã–µ —Å—Ç–æ—Ä—ã –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.
4. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å UI:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (`useStore(s => s.field)`) –∏ –≤—ã–∑—ã–≤–∞—é—Ç `actions`. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
5. **–ö—Ä–æ—Å—Å-—Å—Ç–æ—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:** –†–µ–∞–∫—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–æ—Ä–∞–º–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `rootStore` —á–µ—Ä–µ–∑ `subscribe`.
6. **`useState`:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useState` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–æ. –û–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
7. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è UI-—Ñ–ª–∞–≥–æ–≤ (–∏—é–Ω—å 2025):** –°–æ—Å—Ç–æ—è–Ω–∏–µ `isSidebarOpen` –∏ –¥—Ä—É–≥–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö `useState` –≤ `useUIStore`, –∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –≤ —Ö—É–∫ `useFormSubmit` –¥–ª—è ChatInputArea/SuggestionsView. –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω–∏–ª–æ –≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞. –°–º. `docs/archive/2025-07/duplicate-form-submit-sidebar-state-2025-06-25.md`.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn install

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
yarn dev:neira-app

# –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è production
yarn build:neira-app
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

- [`shell`](/core-concepts/architecture-patterns/manager-architecture) ‚Äî Electron-—è–¥—Ä–æ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç IPC API.
- [`shared-types`](/core-concepts/shell-core/ipc-architecture) ‚Äî —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è IPC.
